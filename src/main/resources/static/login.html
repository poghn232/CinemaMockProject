<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <title>Đăng nhập | MovieZone</title>

    <style>
        body {
            font-family: "Poppins", system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif;
            background:
                    radial-gradient(circle at 0 0, rgba(255, 255, 255, 0.08), transparent 50%),
                    radial-gradient(circle at 100% 100%, rgba(255, 255, 255, 0.05), transparent 55%),
                    linear-gradient(135deg, #050816, #0b1220 50%, #020617);
            height: 100vh;
            display: flex;
            justify-content: center;
            align-items: center;
            margin: 0;
            color: #e5e7eb;
            overflow: hidden;
        }

        .backdrop-blur {
            position: fixed;
            inset: 0;
            background:
                    linear-gradient(to right, rgba(15, 23, 42, 0.9), rgba(15, 23, 42, 0.7)),
                    url("https://images.pexels.com/photos/7991377/pexels-photo-7991377.jpeg?auto=compress&cs=tinysrgb&w=1600")
                    center/cover no-repeat;
            filter: brightness(0.9);
            z-index: -1;
        }

        .login-wrapper {
            display: grid;
            grid-template-columns: minmax(0, 1.3fr) minmax(0, 1fr);
            gap: 60px;
            width: min(1000px, 100% - 64px);
            align-items: center;
        }

        @media (max-width: 820px) {
            .login-wrapper {
                grid-template-columns: 1fr;
                gap: 32px;
            }
        }

        .brand-section {
            display: flex;
            flex-direction: column;
            gap: 20px;
        }

        .brand-logo {
            display: inline-flex;
            align-items: center;
            gap: 10px;
            font-weight: 700;
            letter-spacing: 0.08em;
            text-transform: uppercase;
            font-size: 14px;
            color: #e5e7eb;
        }

        .brand-logo span {
            width: 26px;
            height: 26px;
            border-radius: 999px;
            background: radial-gradient(circle at 30% 20%, #f97316, #e11d48 55%, #4f46e5);
            display: inline-flex;
            align-items: center;
            justify-content: center;
            box-shadow: 0 0 25px rgba(248, 113, 113, 0.45);
            font-size: 14px;
        }

        .brand-title {
            font-size: clamp(28px, 3.1vw, 34px);
            font-weight: 700;
            line-height: 1.15;
        }

        .brand-title span {
            color: #f97316;
        }

        .brand-subtitle {
            max-width: 430px;
            font-size: 14px;
            color: #9ca3af;
        }

        .tagline-chips {
            display: flex;
            flex-wrap: wrap;
            gap: 10px;
            margin-top: 4px;
        }

        .tagline-chip {
            padding: 4px 10px;
            border-radius: 999px;
            border: 1px solid rgba(148, 163, 184, 0.45);
            font-size: 11px;
            text-transform: uppercase;
            letter-spacing: 0.12em;
            color: #e5e7eb;
            backdrop-filter: blur(12px);
            background-color: rgba(15, 23, 42, 0.75);
        }

        .poster-row {
            display: flex;
            gap: 10px;
            margin-top: 18px;
        }

        .poster {
            flex: 1;
            aspect-ratio: 2 / 3;
            border-radius: 14px;
            background-size: cover;
            background-position: center;
            position: relative;
            overflow: hidden;
            box-shadow: 0 20px 35px rgba(0, 0, 0, 0.6);
        }

        .poster::after {
            content: "";
            position: absolute;
            inset: 0;
            background: linear-gradient(to top, rgba(15, 23, 42, 0.96), transparent 55%);
        }

        .poster-info {
            position: absolute;
            inset-inline: 10px;
            bottom: 10px;
            z-index: 1;
        }

        .poster-title {
            font-size: 13px;
            font-weight: 600;
        }

        .poster-tag {
            margin-top: 4px;
            font-size: 11px;
            color: #d1d5db;
        }

        .poster-1 {
            background-image: url("https://image.tmdb.org/t/p/w500/9TEJXta9Jjd26jKV4wLGYzFPYfC.jpg");
        }

        .poster-2 {
            background-image: url("https://image.tmdb.org/t/p/w500/bcERImYVxN8pPMP4RPgCvm91vB.jpg");
        }

        .poster-3 {
            background-image: url("https://image.tmdb.org/t/p/w500/ixZdcct8F7zfMDfUYFhXTR2iCpL.jpg");
        }

        .login-container {
            background: radial-gradient(circle at 0 0, rgba(148, 163, 184, 0.28), transparent 55%),
            radial-gradient(circle at 100% 100%, rgba(59, 130, 246, 0.3), transparent 55%),
            rgba(15, 23, 42, 0.96);
            padding: 30px 28px 26px;
            width: 320px;
            border-radius: 18px;
            box-shadow:
                    0 0 0 1px rgba(148, 163, 184, 0.35),
                    0 18px 45px rgba(15, 23, 42, 0.95);
            text-align: left;
            backdrop-filter: blur(22px);
        }

        .login-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 18px;
        }

        .login-header h2 {
            margin: 0;
            font-size: 20px;
        }

        .login-caption {
            margin: 0;
            margin-bottom: 18px;
            font-size: 13px;
            color: #9ca3af;
        }

        .badge {
            padding: 4px 10px;
            border-radius: 999px;
            font-size: 11px;
            background: rgba(22, 163, 74, 0.15);
            border: 1px solid rgba(52, 211, 153, 0.55);
            color: #bbf7d0;
            display: inline-flex;
            align-items: center;
            gap: 4px;
        }

        .badge-dot {
            width: 7px;
            height: 7px;
            border-radius: 999px;
            background: #22c55e;
            box-shadow: 0 0 0 4px rgba(34, 197, 94, 0.4);
        }

        form {
            margin-top: 8px;
        }

        .field {
            margin-bottom: 12px;
        }

        .field-label {
            font-size: 12px;
            margin-bottom: 5px;
            color: #d1d5db;
        }

        .login-container input {
            width: 100%;
            padding: 9px 11px;
            margin: 0;
            box-sizing: border-box;
            border-radius: 10px;
            border: 1px solid rgba(148, 163, 184, 0.6);
            background-color: rgba(15, 23, 42, 0.9);
            color: #e5e7eb;
            font-size: 13px;
            outline: none;
            transition: border-color 0.18s ease, box-shadow 0.18s ease, background-color 0.18s ease;
        }

        .login-container input::placeholder {
            color: #6b7280;
        }

        .login-container input:focus {
            border-color: #f97316;
            box-shadow: 0 0 0 1px rgba(249, 115, 22, 0.65), 0 0 0 10px rgba(249, 115, 22, 0.1);
            background-color: rgba(15, 23, 42, 1);
        }

        .login-container h2 {
            margin-bottom: 4px;
        }

        .login-container input {
            margin: 0;
        }

        .login-container button {
            width: 100%;
            padding: 11px;
            margin-top: 6px;
            background: linear-gradient(135deg, #f97316, #ec4899);
            border: none;
            color: white;
            font-size: 14px;
            cursor: pointer;
            border-radius: 999px;
            font-weight: 600;
            letter-spacing: 0.03em;
            text-transform: uppercase;
            box-shadow:
                    0 12px 25px rgba(248, 113, 113, 0.5),
                    0 0 0 1px rgba(248, 113, 113, 0.45);
            transition: transform 0.12s ease, box-shadow 0.12s ease, filter 0.12s ease;
        }

        .login-container button:hover {
            filter: brightness(1.05);
            transform: translateY(-1px);
            box-shadow:
                    0 16px 30px rgba(248, 113, 113, 0.7),
                    0 0 0 1px rgba(248, 113, 113, 0.75);
        }

        .login-container button:active {
            transform: translateY(0);
            box-shadow:
                    0 8px 18px rgba(248, 113, 113, 0.5),
                    0 0 0 1px rgba(248, 113, 113, 0.75);
        }

        .helper-row {
            margin-top: 10px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            font-size: 11px;
            color: #9ca3af;
        }

        .helper-row a {
            color: #f97316;
            text-decoration: none;
            font-weight: 500;
        }

        .helper-row a:hover {
            text-decoration: underline;
        }

        .error {
            color: #fca5a5;
            margin-top: 10px;
            font-size: 12px;
            min-height: 16px;
        }
    </style>
</head>
<body>

<div class="backdrop-blur"></div>

<div class="login-wrapper">
    <section class="brand-section">
        <div class="brand-logo">
            <span>MZ</span>
            <span>MovieZone</span>
        </div>
        <h1 class="brand-title">
            Rạp chiếu <span>trực tuyến</span><br/>
            cho mọi đêm phim của bạn.
        </h1>
        <p class="brand-subtitle">
            Đăng nhập để tiếp tục xem những bộ phim bạn đang dở, khám phá xu hướng mới và lưu trữ danh sách yêu thích.
        </p>

        <div class="tagline-chips">
            <div class="tagline-chip">Full HD &amp; 4K</div>
            <div class="tagline-chip">Không giới hạn tập</div>
            <div class="tagline-chip">Đề xuất theo gu</div>
        </div>

        <div class="poster-row">
            <article class="poster poster-1">
                <div class="poster-info">
                    <div class="poster-title">Night City Stories</div>
                    <div class="poster-tag">Hành động · 2025</div>
                </div>
            </article>
            <article class="poster poster-2">
                <div class="poster-info">
                    <div class="poster-title">Echoes of Stars</div>
                    <div class="poster-tag">Khoa học viễn tưởng</div>
                </div>
            </article>
            <article class="poster poster-3">
                <div class="poster-info">
                    <div class="poster-title">Hidden Notes</div>
                    <div class="poster-tag">Tâm lý · Âm nhạc</div>
                </div>
            </article>
        </div>
    </section>

    <section class="login-container">
        <div class="login-header">
            <div>
                <h2>Đăng nhập</h2>
                <p class="login-caption">Tiếp tục hành trình xem phim của bạn.</p>
            </div>
            <div class="badge">
                <span class="badge-dot"></span>
                Online 24/7
            </div>
        </div>

        <form id="loginForm">
            <div class="field">
                <div class="field-label">Tên đăng nhập</div>
                <input type="text" id="username" placeholder="Nhập username của bạn" required>
            </div>
            <div class="field">
                <div class="field-label">Mật khẩu</div>
                <input type="password" id="password" placeholder="••••••••" required>
            </div>

            <button type="submit">Bắt đầu xem ngay</button>

            <div class="helper-row">
                <span>Chưa có tài khoản? <a href="register.html">Đăng ký</a></span>
                <a href="forgot-password.html">Quên mật khẩu?</a>
            </div>
        </form>

        <p id="error" class="error"></p>
    </section>
</div>

<script>
    document.getElementById("loginForm").addEventListener("submit", async function (e) {
        e.preventDefault();

        const username = document.getElementById("username").value;
        const password = document.getElementById("password").value;

        try {
            const response = await fetch("/api/auth/login", {
                method: "POST",
                headers: {
                    "Content-Type": "application/json"
                },
                body: JSON.stringify({ username, password })
            });

            if (!response.ok) {
                document.getElementById("error").innerText = "Tài khoản hoặc mật khẩu đã sai";
                return;
            }

            const data = await response.json();
            localStorage.setItem("token", data.token);
            localStorage.setItem("username", username);

            window.location.href = "homepage.html";
        } catch (err) {
            document.getElementById("error").innerText = "Có lỗi xảy ra, vui lòng thử lại.";
        }
    });
</script>

</body>
</html>